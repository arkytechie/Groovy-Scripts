/* Refer the link below to learn more about the use cases of script.
https://help.sap.com/viewer/368c481cd6954bdfa5d0435479fd4eaf/Cloud/en-US/148851bf8192412cba1f9d2c17f4bd25.html

If you want to know more about the SCRIPT APIs, refer the link below
https://help.sap.com/doc/a56f52e1a58e4e2bac7f7adbf45b2e26/Cloud/en-US/index.html */
import com.sap.gateway.ip.core.customdev.util.Message;
import java.util.HashMap;
def Message processData(Message message) {
    //Body
   def body = message.getBody();
def properties = message.getProperties();
    //Headers
    def headers = message.getHeaders();
    def sapApplicationID = headers.get("SAP_ApplicationID");
      //fetching material year

//materialYear = sapApplicationID.substring(sapApplicationID.length()-4)
//message.setProperty("materialYear",materialYear);

//line 21 to 25 added by Nikhil Sudan
def outboundDeliveryNumber = message.getHeaders().get("SAP_ApplicationID").split("\\|")[0];
message.setProperty("outboundDeliveryNumber",outboundDeliveryNumber);

def salesOrderNumber = message.getHeaders().get("SAP_ApplicationID").split("\\|")[2];
message.setProperty("salesOrderNumber",salesOrderNumber);

/*
materialYear = sapApplicationID.substring(0,4)
message.setProperty("materialYear",materialYear);

//fetching material Number
materialNumber = sapApplicationID.substring(4,sapApplicationID.length());
message.setProperty("materialNumber",materialNumber);
*/
   
    return message;
}